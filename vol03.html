<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>VOL.03 一期一會 — NOMADIC</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;1,700&family=Noto+Serif+TC:wght@300;500;600&display=swap" rel="stylesheet">
    <style>
        :root { --black: #080a08; --emerald: #2d5a4c; --white: #ffffff; --grey: #666666; --dark-grey: #0d1411; }
        body, html { margin: 0; padding: 0; background: var(--black); color: var(--white); font-family: 'Montserrat', 'Noto Serif TC', sans-serif; min-height: 100%; -webkit-font-smoothing: antialiased; }
        
        /* 電影膠卷微噪點 */
        .noise { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 9999; background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="n"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23n)" opacity="0.06"/%3E%3C/svg%3E'); }

        /* 電影寬銀幕遮罩動畫 */
        .cinema-mask { position: fixed; left: 0; width: 100%; height: 8vh; background: var(--black); z-index: 100; transition: all 1.2s cubic-bezier(0.2, 0, 0.2, 1); }
        .mask-top { top: 0; border-bottom: 1px solid rgba(45, 90, 76, 0.2); }
        .mask-bottom { bottom: 0; border-top: 1px solid rgba(45, 90, 76, 0.2); }

        .container { max-width: 600px; margin: 0 auto; padding: calc(10vh + env(safe-area-inset-top)) 25px 15vh; box-sizing: border-box; position: relative; z-index: 10; }

        .nav-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 50px; }
        .nav-back { text-decoration: none; color: var(--grey); font-size: 0.65rem; letter-spacing: 0.2em; transition: color 0.3s; }
        .nav-back:hover { color: var(--emerald); }

        .stamp-area { position: relative; margin-bottom: 60px; text-align: center; }
        .digital-stamp { width: 130px; height: 130px; border: 1.5px solid var(--emerald); border-radius: 0; display: inline-flex; align-items: center; justify-content: center; text-align: center; color: var(--emerald); font-size: 0.55rem; letter-spacing: 0.2em; text-transform: uppercase; opacity: 0.3; transform: rotate(-5deg); transition: all 1s ease; }
        .stamped .digital-stamp { opacity: 1; transform: rotate(0deg) scale(1.05); background: rgba(45, 90, 76, 0.05); box-shadow: 0 0 30px rgba(45, 90, 76, 0.2); }

        .dest-name { font-family: 'Playfair Display', serif; font-style: italic; font-size: 3.2rem; font-weight: 400; margin: 30px 0 10px; color: var(--white); text-align: center; letter-spacing: -0.03em; }

        .mission-card { background: var(--dark-grey); border: 1px solid rgba(45, 90, 76, 0.15); padding: 45px 30px; margin-bottom: 40px; position: relative; }
        .mission-label { font-size: 0.6rem; color: var(--emerald); letter-spacing: 0.6em; margin-bottom: 30px; display: block; text-transform: uppercase; font-weight: 600; }
        .mission-text { font-family: 'Noto Serif TC', serif; font-size: 1.25rem; line-height: 1.8; color: #dddddd; min-height: 120px; }

        .journal-input { width: 100%; background: transparent; border: none; border-bottom: 1px solid #1a2a24; color: var(--white); font-family: 'Noto Serif TC', serif; padding: 20px 0; margin-bottom: 50px; font-size: 1.1rem; outline: none; }
        .journal-input:focus { border-color: var(--emerald); }

        .btn-log { background: var(--emerald); border: none; color: var(--white); padding: 22px; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.4em; text-transform: uppercase; cursor: pointer; width: 100%; transition: all 0.4s; box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
        .btn-log:hover { filter: brightness(1.2); letter-spacing: 0.5em; }

        .logged-view { display: none; text-align: center; animation: fadeIn 1.5s ease forwards; }
        .logged-note { font-family: 'Noto Serif TC', serif; font-size: 1.15rem; color: var(--emerald); font-style: italic; margin-bottom: 40px; line-height: 2; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="noise"></div>
    <div class="cinema-mask mask-top"></div>
    <div class="cinema-mask mask-bottom"></div>

    <div class="container">
        <div class="nav-header">
            <a href="index.html" class="nav-back">← CUT SCENE</a>
            <div style="font-size: 0.6rem; color: var(--emerald); letter-spacing: 0.3em; font-weight: 600;">VOL. 03 / SCENE</div>
        </div>

        <div class="stamp-area" id="stamp-container">
            <div class="digital-stamp" id="stamp-text">SCENE<br>START</div>
            <h1 class="dest-name" id="display-loc">...</h1>
        </div>

        <div class="mission-card">
            <span class="mission-label">一期一會 CHALLENGE</span>
            <div class="mission-text" id="mission-content">Rolling footage...</div>
        </div>

        <div id="action-area">
            <input type="text" class="journal-input" id="journal-text" placeholder="紀錄這場戲的心境，或留下一段場記...">
            <button class="btn-log" onclick="saveJourney()">RECORD SCENE (寫入膠卷)</button>
        </div>

        <div class="logged-view" id="logged-view">
            <div class="logged-note" id="saved-journal"></div>
            <p style="border-top: 1px solid #1a2a24; padding-top: 35px; font-size: 0.65rem; color: #44554e; letter-spacing: 0.2em; line-height: 2.2;">
                時空已於此處凝結。<br>
                SCENE CAPTURED IN ETERNAL ARCHIVE.
            </p>
        </div>
    </div>

    <script>
        const missions = [
            "【重慶森林式】找一段人潮背景，拍下兩人手拉手、身體模糊但感覺強烈的瞬間。",
            "【對視 180 秒】在安靜角落對視 3 分鐘不准說話。結束後對對方說出一件他在你眼裡的優點。",
            "【不露臉的情書】拍一張不露臉，但能感受到兩人親密感的細節照（如手牽手、影子）。",
            "【末日超市】去當地雜貨店，選出一樣「末日時想送給對方」的物品並拍下它。",
            "【交換穿搭】互相交換一件外套或帽子，在當地最老舊的建築門口合照。",
            "【局部觀察】拍下對方今天「吃東西時最可愛的局部」，可以是嘴唇或專注的眼神。",
            "【時光旅人】找出這裡最像 30 年前的角落。兩人背對背站立，中間空出距離拍一張照。",
            "【光影追逐】尋找一處夕陽或路燈產生的長影，拍下一張兩人影子擁抱的照片。",
            "【雨夜花】如果是雨天，拍一張打傘的背影；如果是晴天，拍一張逆光中對方的輪廓。",
            "【對講機傳情】兩人分開一段距離，只能看見彼此但聽不到，用手勢傳達「我想你了」。",
            "【側寫師】偷拍一張對方「正在認真做某事」的側臉，不准讓他發現。",
            "【街道漫步】將相機放在地面，錄下兩人走過鏡頭的腳步特寫。",
            "【窗外風景】隔著玻璃拍一張對方的臉，讓玻璃上的反射與表情交織。",
            "【秘密座標】找這區一個最隱密的角落，兩人合力疊一個石堆，只有你們知道在哪。",
            "【眼神交會】在當地最繁忙的馬路兩側，當燈號亮起，在人群中尋找彼此的眼神。",
            "【復古色調】尋找一個帶有紅色或綠色的招牌，拍一張很有王家衛氛圍的照片。",
            "【默劇演出】在不發出聲音的情況下，兩人合力拍一張「發生爭執後和好」的劇情照。",
            "【光影對峙】找一個強烈側光的位置，拍下一張兩人臉部半明半暗的特寫。",
            "【消失點】在長長的走廊或鐵路邊，拍一張兩人走向盡頭的背影。",
            "【電影預告】想一個屬於你們這場旅程的片名，並在照片中用文字加上去。",
            "【黑白記憶】拍一張黑白照片，排除所有色彩，專注在紋理與表情。",
            "【情緒碎片】只拍一張對方的眼睛特寫，要能看出他當下的心情。",
            "【異地重逢】假裝你們在陌生的鄉鎮第一次相遇，拍下那一瞬間的驚訝或微笑。",
            "【煙火瞬間】找一個色彩繽紛的景點，拍一張兩人正在興奮指著某處的照片。",
            "【手心溫度】拍一張對方牽著你的手，第一人稱視角的照片。",
            "【靈魂對白】用餐時，不准說話，用寫字的方式進行一段 5 分鐘的溝通。",
            "【慢動作】拍一段 5 秒的慢動作影片：對方回頭看向你的瞬間。",
            "【模糊的美】挑戰故意手震，拍出一張色彩斑斕但看不清細節的藝術照。",
            "【牆上的話】尋找牆上的塗鴉或文字，讓它成為你們合照中的「台詞」。",
            "【海拔高度】站在這區地勢最高的地方，拍一張兩人俯瞰世界的合照。",
            "【尋找 1990】找一個老舊電話亭，一人在內一人在外，拍一張通話中的照片。",
            "【局部契合】拍兩隻手拼成一個愛心的影子，倒映在粗糙的牆面上。",
            "【光束挑戰】尋找一束穿透雲層或建築的光束，讓對方站在光裡拍一張照。",
            "【對稱美學】找一個對稱的建築門口，兩人各站一邊，模仿魏斯安德森的風格。",
            "【私密角落】在這區找一個沒人的長椅，坐著什麼都不說，感受空氣 5 分鐘。",
            "【心跳頻率】錄一段對方的心跳聲（或是大聲唸出你現在的心跳速度）。",
            "【視覺蒙太奇】拍三張完全不同角度但相關的物品，組合成一組故事。",
            "【神秘人】拍一張對方戴著墨鏡或帽子的酷照，背景是這區最熱鬧的地方。",
            "【反光紀錄】透過商店玻璃拍一張你們兩個人的倒影，而非實體。",
            "【台詞練習】一人說一句你聽過最浪漫的電影台詞，錄下來。",
            "【無聲電影】拍一張兩人正在大笑但沒有聲音的照片。",
            "【逆流而上】在人群走動的方向，只有你們兩個人定格站立拍照。",
            "【鏡頭之外】拍一張對方的背影，背景是你最喜歡的這區風景。",
            "【色彩編碼】尋找這區最具代表性的顏色（如：廟宇紅），拍一張全是該色的照片。",
            "【特寫挑戰】只拍對方的耳朵、手指或肩膀，展現一種細膩的觸感。",
            "【電影海報】在當地地標前，擺出一個英雄式或經典浪漫的姿勢拍照。",
            "【重逢的擁抱】假裝分別了很久，在當地的火車站或公車站擁抱並紀錄。",
            "【迷失地圖】收起手機，由對方帶路走 10 分鐘，不管去哪裡。",
            "【手牽手走完】在這區最美的一段路，必須手牽手不放開地走完。",
            "【未來預告】問對方：下一場電影（下一站），你最想跟我演什麼戲？",
            "【光之軌跡】在傍晚時分，拍一張車燈流動與你們靜止的對比照。",
            "【文字力量】找一個招牌上有「愛」或「幸福」字眼的角落拍照。",
            "【低調奢華】拍一張兩人的鞋子並排在一起的照片，背景是當地的地磚。",
            "【神祕儀式】找一個風景好的地方，兩人同時閉眼許一個願望再張開。",
            "【側拍的愛】在對方不知情的情況下，拍下他「望向遠方」的樣子。",
            "【背影對白】兩人的背影靠在一起，中間留一點縫隙讓光透進來。",
            "【捕捉呼吸】拍一張寒冷時（如果有）呼出的白煙，或是熱天裡的冰水霧氣。",
            "【幾何遊戲】找一組階梯，一人高一階，拍出高低差的趣味感。",
            "【心動瞬間】描述一個剛才在這區，對方讓你突然心動的小動作。",
            "【最美的意外】拍一張你在這區發現最奇特的、不在計劃內的小物件。",
            "【兩人三腳】嘗試同步踏步走過這條街，並拍下那種不協調的可愛感。",
            "【光影迷藏】利用柱子的陰影，拍一張一人躲在暗處、一人在亮處的照片。",
            "【情書檔案】在手機記事本寫下一段話給 10 年後的對方，儲存起來。",
            "【環境肖像】讓對方站在遠處，融入這區廣闊的風景中拍一張照。",
            "【視線誘導】拍一張你指著遠方，而對方看著你的照片。",
            "【情緒色調】如果你現在的心情是一首歌，你會把這張照片調成什麼顏色？",
            "【靜默的街】找一段沒人的街道，錄下你們兩個人走路的腳步聲。",
            "【視覺驚奇】找一個反光的金屬球或曲面，拍出扭曲的你們。",
            "【電影終幕】拍一張兩人一起揮手告別這個區域的照片。",
            "【靈魂印記】在紀錄裡寫下這區對你們兩個人的「專屬意義」。",
            "【光與塵埃】在陽光照射的室內，拍下空氣中飛揚的微小塵埃感。",
            "【微縮世界】利用移軸或透視，拍出一張讓建築看起來像模型照片。",
            "【情緒飽滿】拍一張對方流汗或大汗淋漓後的真實樣子。",
            "【深夜對話】如果現在是深夜，你會想對身邊的人說什麼？",
            "【鏡像人生】找一面大鏡子，拍下鏡中的你們與真實的環境。",
            "【不協調的美】穿著正式的衣服在雜亂的傳統市場拍一張劇照。",
            "【等待的藝術】在公車站牌等 3 分鐘，拍下這 3 分鐘內你們的狀態。",
            "【光影之吻】拍一張兩人的影子正在接吻的照片。",
            "【建築語言】找一個這區最有特色的老屋頂，讓它成為人像背景。",
            "【色彩碰撞】尋找一處極度鮮豔的色彩對比（如紅門綠牆）拍照。",
            "【眼神的溫度】近距離拍一張對方看著你的眼神特寫。",
            "【手部的故事】拍一張兩人的手正在共同拿著一樣東西的畫面。",
            "【風景的註解】拍一張空景，並用你的手寫字（實體或數位）寫下心情。",
            "【溫度的紀錄】觸摸這區的一堵牆，描述它傳給你的感覺。",
            "【秘密基地】找出這區的一個公園角落，設定為你們的專屬基地。",
            "【電影配樂】想像此時有一段音樂，那會是什麼類型的旋律？",
            "【笑容紀錄】拍下對方今天笑得最燦爛的一張照片。",
            "【背影的承諾】拍一張對方的背影，並在心裡許下一個關於他的承諾。",
            "【時空膠囊】找一個特別的數字或日期地標，與它合影。",
            "【視覺的詩】拍一張極簡的照片，畫面中只有一個物件和大量留白。",
            "【光影流轉】在旋轉木馬或旋轉門邊拍一張模糊動感的照片。",
            "【兩人的視角】一人拍一張對方的特寫，然後合併在一起。",
            "【無名英雄】拍下一位這區正在努力工作的人（側寫），並心懷感謝。",
            "【最後的告別】在離開行政區邊界時，拍下最後一個路標。",
            "【未來的藍圖】問對方：下一個 368 站，你想跟我演哪一齣戲？",
            "【靈魂對話】看著對方的眼睛說聲：『謝謝你帶我來到這裡』。",
            "【場景結束】按下儲存鍵，紀錄這段不可複製的一期一會。"
        ];

        const urlParams = new URLSearchParams(window.location.search);
        const locationName = urlParams.get('loc') || "未知座標";
        document.getElementById('display-loc').innerText = locationName;
        
        let masterJournal = JSON.parse(localStorage.getItem('nomadic_master_journal')) || [];
        const existingRecord = masterJournal.find(v => v.name === locationName && v.issue === "VOL.03");

        if (existingRecord) {
            renderLoggedState(existingRecord);
        } else {
            const randomMission = missions[Math.floor(Math.random() * missions.length)];
            document.getElementById('mission-content').innerText = randomMission;
        }

        function saveJourney() {
            const note = document.getElementById('journal-text').value || "一期一會，此地場景已存入記憶。";
            const mission = document.getElementById('mission-content').innerText;
            const now = new Date();
            const dateStr = `${now.getFullYear()}.${String(now.getMonth()+1).padStart(2,'0')}.${String(now.getDate()).padStart(2,'0')}`;

            const newRecord = {
                name: locationName,
                date: dateStr,
                note: note,
                mission: mission,
                issue: "VOL.03"
            };

            masterJournal.push(newRecord);
            localStorage.setItem('nomadic_master_journal', JSON.stringify(masterJournal));
            renderLoggedState(newRecord);
        }

        function renderLoggedState(record) {
            document.getElementById('stamp-container').classList.add('stamped');
            document.getElementById('stamp-text').innerHTML = `CAPTURED<br>${record.date}`;
            document.getElementById('mission-content').innerText = record.mission;
            document.getElementById('action-area').style.display = 'none';
            document.getElementById('logged-view').style.display = 'block';
            document.getElementById('saved-journal').innerText = `“ ${record.note} ”`;
        }
    </script>
</body>
</html>
