<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>NOMADIC â€” Vol. 01</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400&family=Playfair+Display:ital,wght@0,400;1,700&family=Noto+Serif+TC:wght@200;400&display=swap" rel="stylesheet">
    <style>
        :root { --black: #0a0a0a; --gold: #c5a368; --white: #fdfdfd; --grey: #888888; }
        
        /* iPhone é©é…ï¼šé˜²æ­¢æ©¡çš®ç­‹å›å½ˆæ•ˆæ‡‰ */
        body, html { 
            margin: 0; padding: 0; background: var(--black); color: var(--white);
            font-family: 'Montserrat', 'Noto Serif TC', sans-serif;
            height: 100%; overflow: hidden; -webkit-font-smoothing: antialiased;
        }

        /* å™ªé»å±¤ */
        .noise {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none; z-index: 999;
            background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="n"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23n)" opacity="0.04"/%3E%3C/svg%3E');
        }

        /* èƒŒæ™¯èˆ‡ä½ˆå±€ï¼šiPhone 16/13 çš„è¢å¹•é•·åº¦è¨­è¨ˆ */
        .main-container {
            height: 100vh; display: flex; flex-direction: column;
            justify-content: space-between; align-items: center;
            padding: calc(60px + env(safe-area-inset-top)) 40px calc(60px + env(safe-area-inset-bottom));
            box-sizing: border-box; text-align: center;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), 
                        url('https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=1000') center/cover no-repeat;
            position: relative; z-index: 2;
        }

        /* æ¨™é¡Œèˆ‡ç´€éŒ„çµ±è¨ˆ */
        header h2 { font-family: 'Playfair Display', serif; font-size: 0.7rem; letter-spacing: 0.5em; color: var(--gold); margin-bottom: 12px; font-weight: 300; }
        header h1 { font-family: 'Playfair Display', serif; font-style: italic; font-size: 2.3rem; font-weight: 700; margin: 0; letter-spacing: 0.05em; }
        .footprint-stats {
            margin-top: 15px; font-size: 0.6rem; letter-spacing: 0.25em; color: var(--grey);
            text-transform: uppercase;
        }
        #regions-count { color: var(--white); font-weight: 400; margin-left: 5px; }

        /* ä¸­é–“ï¼šç›®çš„åœ°é¡¯å½±å€ */
        .display-area { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; width: 100%; }
        #result { 
            font-family: 'Noto Serif TC', serif; font-size: 2.4rem; letter-spacing: 0.15em;
            margin-bottom: 10px; min-height: 3.5rem; opacity: 1; transition: opacity 0.8s ease;
            font-weight: 200;
        }
        .mission-text {
            font-family: 'Noto Serif TC', serif; font-size: 0.8rem; color: #777;
            max-width: 280px; margin: 0 auto; line-height: 1.8; opacity: 0; transition: 1s ease;
        }

        /* ä¸‹æ–¹ï¼šæ“ä½œç¾¤çµ„ */
        .action-group { width: 100%; display: flex; flex-direction: column; gap: 15px; }
        
        .btn-main {
            background: none; border: 1px solid rgba(255,255,255,0.25); color: var(--white);
            padding: 20px; font-size: 0.7rem; letter-spacing: 0.4em; text-transform: uppercase;
            cursor: pointer; transition: all 0.4s; border-radius: 0;
            -webkit-tap-highlight-color: transparent;
        }
        .btn-main:active { background: var(--white); color: var(--black); border-color: var(--white); }
        
        #checkin-btn {
            border: none; background: rgba(197, 163, 104, 0.12); color: var(--gold);
            display: none; /* æŠ½ç±¤å¾Œæ‰å‡ºç¾ */
            animation: fadeIn 0.8s ease forwards;
        }

        .back-link { 
            position: fixed; top: calc(20px + env(safe-area-inset-top)); left: 25px;
            text-decoration: none; color: #555; font-size: 0.6rem; letter-spacing: 0.3em; z-index: 10;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="noise"></div>
    <a href="index.html" class="back-link">â† ARCHIVES</a>

    <div class="main-container">
        <header>
            <h2>VOL. 01</h2>
            <h1>The Travel Issue</h1>
            <div class="footprint-stats">
                Footprints: <span id="regions-count">0</span> Regions
            </div>
        </header>

        <div class="display-area">
            <div id="result">The Unknown</div>
            <div id="mission" class="mission-text"></div>
        </div>

        <div class="action-group">
            <button class="btn-main" onclick="roll()">Seek Destination</button>
            <button id="checkin-btn" class="btn-main" onclick="recordPlace()">Mark as Explored</button>
        </div>
    </div>

    <script>
        // å°ç£è¡Œæ”¿å€æ•¸æ“š (ç¯„ä¾‹ç¸®æ¸›ç‰ˆï¼Œå¯è‡ªè¡Œè£œå…¨å®Œæ•´æ¸…å–®)
        const taiwanData = [
            "å˜‰ç¾©å¸‚ æ±å€", "å˜‰ç¾©å¸‚ è¥¿å€", "å˜‰ç¾©ç¸£ æ°´ä¸Šé„‰", "å˜‰ç¾©ç¸£ é˜¿é‡Œå±±é„‰", 
            "å˜‰ç¾©ç¸£ æ¢…å±±é„‰", "å˜‰ç¾©ç¸£ å¤§åŸ”é„‰", "å°å—å¸‚ å®‰å¹³å€", "å°å—å¸‚ ä¸­è¥¿å€",
            "é«˜é›„å¸‚ é¹½åŸ•å€", "é«˜é›„å¸‚ é¼“å±±å€", "å±æ±ç¸£ æ†æ˜¥é®"
        ];

        // éš¨æ©Ÿä»»å‹™
        const missions = [
            "å°‹æ‰¾ç•¶åœ°æœ€è€çš„ä¸€æ£µæ¨¹ä¸¦åˆå½±",
            "åœ¨ç•¶åœ°é›œè²¨åº—è²·ä¸€æ¨£æ²’è¦‹éçš„å°é›¶é£Ÿ",
            "æ‰¾ä¸€å€‹èƒ½çœ‹è¦‹åœ°å¹³ç·šçš„é«˜è™•ç™¼å‘†",
            "ç‚ºå½¼æ­¤æ‹ä¸€å¼µå¸¶æœ‰ç•¶åœ°è·¯æ¨™çš„ç‰¹å¯«ç…§ç‰‡",
            "åœ¨ç•¶åœ°çš„å¸‚å ´è²·ä¸€è¢‹ç•¶å­£æ°´æœ"
        ];

        let visitedPlaces = JSON.parse(localStorage.getItem('nomadic_footprints')) || [];
        let currentResult = "";

        // åˆå§‹åŒ–é¡¯ç¤º
        document.getElementById('regions-count').innerText = visitedPlaces.length;

        function roll() {
            const resultEl = document.getElementById('result');
            const missionEl = document.getElementById('mission');
            const checkinBtn = document.getElementById('checkin-btn');

            // æ’é™¤å·²å»éçš„åœ°é»
            const pool = taiwanData.filter(place => !visitedPlaces.includes(place));

            if (pool.length === 0) {
                resultEl.innerText = "Borders Finished.";
                return;
            }

            // å‹•æ…‹æ•ˆæœ
            resultEl.style.opacity = 0;
            missionEl.style.opacity = 0;
            checkinBtn.style.display = "none";

            setTimeout(() => {
                currentResult = pool[Math.floor(Math.random() * pool.length)];
                resultEl.innerText = currentResult;
                missionEl.innerText = missions[Math.floor(Math.random() * missions.length)];
                
                resultEl.style.opacity = 1;
                missionEl.style.opacity = 1;
                checkinBtn.style.display = "block";
            }, 600);
        }

        function recordPlace() {
            if (!currentResult || visitedPlaces.includes(currentResult)) return;

            visitedPlaces.push(currentResult);
            localStorage.setItem('nomadic_footprints', JSON.stringify(visitedPlaces));
            
            document.getElementById('regions-count').innerText = visitedPlaces.length;
            document.getElementById('checkin-btn').style.display = "none";
            
            alert(`ğŸ“ ${currentResult} å·²å¯«å…¥è¶³è·¡æ­·å²`);
        }
    </script>
</body>
</html>
