<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'Ã‰VASION â€” The Travel Issue</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Serif+TC:wght@200;300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --black: #0a0a0a; --white: #fdfdfd; --grey: #777777; --vogue-red: #a81c1c; }
        ::-webkit-scrollbar { display: none; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: 'Montserrat', 'Noto Serif TC', sans-serif; background-color: var(--black); color: var(--white); overflow-x: hidden; scrollbar-width: none; }

        /* COVER */
        #index-page { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: linear-gradient(rgba(0,0,0,0.3), rgba(10,10,10,0.9)), url('https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=2000&auto=format&fit=crop') center/cover no-repeat; z-index: 10; transition: opacity 1.2s ease, transform 1.2s ease; padding: 40px; box-sizing: border-box; }
        .index-container { max-width: 650px; width: 100%; text-align: center; }
        .index-vol { font-family: 'Playfair Display', serif; font-size: clamp(2.5rem, 7vw, 5rem); font-style: italic; margin-bottom: 10px; }
        .index-subtitle { font-size: 0.7rem; letter-spacing: 0.5em; text-transform: uppercase; margin-bottom: 40px; color: var(--grey); }
        .enter-btn { font-family: 'Montserrat', sans-serif; font-size: 0.7rem; letter-spacing: 0.3em; text-transform: uppercase; background: transparent; border: 1px solid var(--white); padding: 18px 45px; cursor: pointer; color: var(--white); transition: 0.5s; }
        .enter-btn:hover { background: var(--white); color: var(--black); }

        /* GENERATOR */
        #generator-page { position: absolute; top: 0; left: 0; width: 100%; min-height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background-color: var(--black); z-index: 5; opacity: 0; pointer-events: none; padding: 40px 20px; box-sizing: border-box; transition: opacity 1s ease; }
        .layout { width: 100%; max-width: 480px; text-align: center; }
        .nav-back { font-size: 0.6rem; letter-spacing: 0.3em; text-transform: uppercase; cursor: pointer; color: var(--grey); margin-bottom: 50px; display: inline-block; text-decoration: none; }
        
        .result-area { min-height: 180px; display: flex; flex-direction: column; justify-content: center; margin-bottom: 40px; }
        .result-box { font-family: 'Noto Serif TC', serif; font-size: 2.8rem; font-weight: 200; letter-spacing: 0.1em; color: var(--white); line-height: 1.3; }
        .result-count { font-size: 0.6rem; color: #444; margin-top: 15px; letter-spacing: 0.2em; }

        .mission-box { font-family: 'Noto Serif TC', serif; font-size: 0.9rem; color: #aaa; padding: 30px 0; margin-bottom: 30px; border-top: 1px solid #222; border-bottom: 1px solid #222; line-height: 2; font-weight: 200; display: none; }
        
        .btn-group { display: flex; flex-direction: column; gap: 15px; }
        .action-btn { font-family: 'Montserrat', sans-serif; font-size: 0.7rem; padding: 20px; cursor: pointer; border: 1px solid #333; transition: 0.5s; letter-spacing: 0.3em; text-transform: uppercase; color: var(--white); background: transparent; }
        .draw-btn { background: var(--white); color: var(--black); border: none; font-weight: 600; }
        .history-btn { font-size: 0.6rem; border: none; color: #444; margin-top: 20px; }

        .hidden { opacity: 0; transform: translateY(-20px); pointer-events: none; }
    </style>
</head>
<body>

    <div id="index-page">
        <div class="index-container">
            <div class="index-vol">Vol. 01</div>
            <div class="index-subtitle">é©¶å‘æœªçŸ¥çš„å‰¯é©¾è§†è§’</div>
            <button class="enter-btn" onclick="enterZine()">Seek Destination</button>
        </div>
    </div>

    <div id="generator-page">
        <div class="layout">
            <a href="index.html" class="nav-back">â† Back to Archives</a>
            
            <div class="result-area">
                <div class="result-box" id="result">The Unknown</div>
                <div class="result-count" id="visited-count">History: 0 places explored</div>
            </div>

            <div class="mission-box" id="mission-box"></div>

            <div class="btn-group">
                <button class="action-btn draw-btn" onclick="startRolling()">Reveal The Path</button>
                <button class="action-btn" id="confirm-btn" style="display:none;" onclick="confirmArrival()">Arrived & Check-in</button>
                <button class="history-btn" onclick="clearHistory()">Reset History</button>
            </div>
        </div>
    </div>

<script>
    const taiwanData = {
        "åŸºéš†å¸‚": ["ä»æ„›å€", "ä¿¡ç¾©å€", "ä¸­æ­£å€", "ä¸­å±±å€", "å®‰æ¨‚å€", "æš–æš–å€", "ä¸ƒå µå€"],
        "å°åŒ—å¸‚": ["ä¸­æ­£å€", "å¤§åŒå€", "ä¸­å±±å€", "æ¾å±±å€", "å¤§å®‰å€", "è¬è¯å€", "ä¿¡ç¾©å€", "å£«æ—å€", "åŒ—æŠ•å€", "å…§æ¹–å€", "å—æ¸¯å€", "æ–‡å±±å€"],
        "æ–°åŒ—å¸‚": ["è¬é‡Œå€", "é‡‘å±±å€", "æ¿æ©‹å€", "æ±æ­¢å€", "æ·±å‘å€", "çŸ³ç¢‡å€", "ç‘èŠ³å€", "å¹³æºªå€", "é›™æºªå€", "è²¢å¯®å€", "æ–°åº—å€", "åªæ—å€", "çƒä¾†å€", "æ°¸å’Œå€", "ä¸­å’Œå€", "åœŸåŸå€", "ä¸‰å³½å€", "æ¨¹æ—å€", "é¶¯æ­Œå€", "ä¸‰é‡å€", "æ–°èŠå€", "æ³°å±±å€", "æ—å£å€", "è˜†æ´²å€", "äº”è‚¡å€", "å…«é‡Œå€", "æ·¡æ°´å€", "ä¸‰èŠå€", "çŸ³é–€å€"],
        "æ¡ƒåœ’å¸‚": ["ä¸­å£¢å€", "å¹³é®å€", "é¾æ½­å€", "æ¥Šæ¢…å€", "æ–°å±‹å€", "è§€éŸ³å€", "æ¡ƒåœ’å€", "é¾œå±±å€", "å…«å¾·å€", "å¤§æºªå€", "å¾©èˆˆå€", "å¤§åœ’å€", "è˜†ç«¹å€"],
        "æ–°ç«¹å¸‚": ["æ±å€", "åŒ—å€", "é¦™å±±å€"],
        "æ–°ç«¹ç¸£": ["ç«¹åŒ—å¸‚", "æ¹–å£é„‰", "æ–°è±é„‰", "æ–°åŸ”é®", "é—œè¥¿é®", "èŠæ—é„‰", "å¯¶å±±é„‰", "ç«¹æ±é®", "äº”å³°é„‰", "æ©«å±±é„‰", "å°–çŸ³é„‰", "åŒ—åŸ”é„‰", "å³¨çœ‰é„‰"],
        "è‹—æ —ç¸£": ["ç«¹å—é®", "é ­ä»½å¸‚", "ä¸‰ç£é„‰", "å—åº„é„‰", "ç…æ½­é„‰", "å¾Œé¾é®", "é€šéœ„é®", "è‹‘è£¡é®", "è‹—æ —å¸‚", "é€ æ©‹é„‰", "é ­å±‹é„‰", "å…¬é¤¨é„‰", "å¤§æ¹–é„‰", "æ³°å®‰é„‰", "éŠ…é‘¼é„‰", "ä¸‰ç¾©é„‰", "è¥¿æ¹–é„‰", "å“è˜­é®"],
        "å°ä¸­å¸‚": ["ä¸­å€", "æ±å€", "å—å€", "è¥¿å€", "åŒ—å€", "åŒ—å±¯å€", "è¥¿å±¯å€", "å—å±¯å€", "å¤ªå¹³å€", "å¤§é‡Œå€", "éœ§å³°å€", "çƒæ—¥å€", "è±åŸå€", "åé‡Œå€", "çŸ³å²¡å€", "æ±å‹¢å€", "å’Œå¹³å€", "æ–°ç¤¾å€", "æ½­å­å€", "å¤§é›…å€", "ç¥å²¡å€", "å¤§è‚šå€", "æ²™é¹¿å€", "é¾äº•å€", "æ¢§æ£²å€", "æ¸…æ°´å€", "å¤§ç”²å€", "å¤–åŸ”å€", "å¤§å®‰å€"],
        "å½°åŒ–ç¸£": ["å½°åŒ–å¸‚", "èŠ¬åœ’é„‰", "èŠ±å£‡é„‰", "ç§€æ°´é„‰", "é¹¿æ¸¯é®", "ç¦èˆˆé„‰", "ç·šè¥¿é„‰", "å’Œç¾é®", "ä¼¸æ¸¯é„‰", "å“¡æ—å¸‚", "ç¤¾é ­é„‰", "æ°¸é–é„‰", "åŸ”å¿ƒé„‰", "æºªæ¹–é®", "å¤§æ‘é„‰", "åŸ”é¹½é„‰", "ç”°ä¸­é®", "åŒ—æ–—é®", "ç”°å°¾é„‰", "åŸ¤é ­é„‰", "æºªå·é„‰", "ç«¹å¡˜é„‰", "äºŒæ—é®", "å¤§åŸé„‰", "èŠ³è‹‘é„‰", "äºŒæ°´é„‰"],
        "å—æŠ•ç¸£": ["å—æŠ•å¸‚", "ä¸­å¯®é„‰", "è‰å±¯é®", "åœ‹å§“é„‰", "åŸ”é‡Œé®", "ä»æ„›é„‰", "åé–“é„‰", "é›†é›†é®", "æ°´é‡Œé„‰", "é­šæ± é„‰", "ä¿¡ç¾©é„‰", "ç«¹å±±é®", "é¹¿è°·é„‰"],
        "é›²æ—ç¸£": ["æ–—å—é®", "å¤§åŸ¤é„‰", "è™å°¾é®", "åœŸåº«é®", "è¤’å¿ é„‰", "æ±å‹¢é„‰", "è‡ºè¥¿é„‰", "å´™èƒŒé„‰", "éº¥å¯®é„‰", "æ–—å…­å¸‚", "æ—å…§é„‰", "å¤å‘é„‰", "è¿æ¡é„‰", "è¥¿èºé®", "äºŒå´™é„‰", "åŒ—æ¸¯é®", "æ°´æ—é„‰", "å£æ¹–é„‰", "å››æ¹–é„‰", "å…ƒé•·é„‰"],
        "å˜‰ç¾©å¸‚": ["æ±å€", "è¥¿å€"],
        "å˜‰ç¾©ç¸£": ["ç•ªè·¯é„‰", "æ¢…å±±é„‰", "ç«¹å´é„‰", "é˜¿é‡Œå±±é„‰", "ä¸­åŸ”é„‰", "å¤§åŸ”é„‰", "æ°´ä¸Šé„‰", "é¹¿è‰é„‰", "å¤ªä¿å¸‚", "æœ´å­å¸‚", "æ±çŸ³é„‰", "å…­è…³é„‰", "æ–°æ¸¯é„‰", "æ°‘é›„é„‰", "å¤§æ—é®", "æºªå£é„‰", "ç¾©ç«¹é„‰", "å¸ƒè¢‹é®"],
        "å°å—å¸‚": ["ä¸­è¥¿å€", "æ±å€", "å—å€", "åŒ—å€", "å®‰å¹³å€", "å®‰å—å€", "æ°¸åº·å€", "æ­¸ä»å€", "æ–°åŒ–å€", "å·¦é®å€", "ç‰äº•å€", "æ¥ è¥¿å€", "å—åŒ–å€", "ä»å¾·å€", "é—œå»Ÿå€", "é¾å´å€", "å®˜ç”°å€", "éº»è±†å€", "ä½³é‡Œå€", "è¥¿æ¸¯å€", "ä¸ƒè‚¡å€", "å°‡è»å€", "å­¸ç”²å€", "åŒ—é–€å€", "æ–°ç‡Ÿå€", "å¾Œå£å€", "ç™½æ²³å€", "æ±å±±å€", "å…­ç”²å€", "ä¸‹ç‡Ÿå€", "æŸ³ç‡Ÿå€", "é¹½æ°´å€", "å–„åŒ–å€", "å¤§å…§å€", "å±±ä¸Šå€", "æ–°å¸‚å€", "å®‰å®šå€"],
        "é«˜é›„å¸‚": ["æ¥ æ¢“å€", "å·¦ç‡Ÿå€", "é¼“å±±å€", "ä¸‰æ°‘å€", "é¹½åŸ•å€", "å‰é‡‘å€", "æ–°èˆˆå€", "è‹“é›…å€", "å‰é®å€", "æ——æ´¥å€", "å°æ¸¯å€", "é³³å±±å€", "æ—åœ’å€", "å¤§å¯®å€", "å¤§æ¨¹å€", "å¤§ç¤¾å€", "ä»æ­¦å€", "é³¥æ¾å€", "å²¡å±±å€", "æ©‹é ­å€", "ç‡•å·¢å€", "ç”°å¯®å€", "é˜¿è“®å€", "è·¯ç«¹å€", "æ¹–å…§å€", "èŒ„è£å€", "æ°¸å®‰å€", "å½Œé™€å€", "æ¢“å®˜å€", "æ——å±±å€", "ç¾æ¿ƒå€", "å…­é¾œå€", "ç”²ä»™å€", "æ‰æ—å€", "å…§é–€å€", "èŒ‚æ—å€", "æ¡ƒæºå€", "é‚£ç‘ªå¤å€"],
        "å±æ±ç¸£": ["å±æ±å¸‚", "ä¸‰åœ°é–€é„‰", "éœ§è‡ºé„‰", "ç‘ªå®¶é„‰", "ä¹å¦‚é„‰", "é‡Œæ¸¯é„‰", "é«˜æ¨¹é„‰", "é¹½åŸ”é„‰", "é•·æ²»é„‰", "éºŸæ´›é„‰", "ç«¹ç”°é„‰", "å…§åŸ”é„‰", "è¬ä¸¹é„‰", "æ½®å·é®", "æ³°æ­¦é„‰", "ä¾†ç¾©é„‰", "è¬å·’é„‰", "å´é ‚é„‰", "æ–°åŸ¤é„‰", "å—å·é„‰", "æ—é‚Šé„‰", "æ±æ¸¯é®", "ç‰çƒé„‰", "ä½³å†¬é„‰", "æ–°åœ’é„‰", "æ‹å¯®é„‰", "æ‹å±±é„‰", "æ˜¥æ—¥é„‰", "ç…å­é„‰", "è»ŠåŸé„‰", "ç‰¡ä¸¹é„‰", "æ†æ˜¥é®", "æ»¿å·é„‰"],
        "å®œè˜­ç¸£": ["å®œè˜­å¸‚", "é ­åŸé®", "ç¤æºªé„‰", "å£¯åœé„‰", "å“¡å±±é„‰", "ç¾…æ±é®", "ä¸‰æ˜Ÿé„‰", "å¤§åŒé„‰", "äº”çµé„‰", "å†¬å±±é„‰", "è˜‡æ¾³é®", "å—æ¾³é„‰"],
        "èŠ±è“®ç¸£": ["èŠ±è“®å¸‚", "æ–°åŸé„‰", "ç§€æ—é„‰", "å‰å®‰é„‰", "å£½è±é„‰", "é³³æ—é®", "å…‰å¾©é„‰", "è±æ¿±é„‰", "ç‘ç©—é„‰", "è¬æ¦®é„‰", "ç‰é‡Œé®", "å“æºªé„‰", "å¯Œé‡Œé„‰"],
        "å°æ±ç¸£": ["è‡ºæ±å¸‚", "ç¶ å³¶é„‰", "è˜­å¶¼é„‰", "å»¶å¹³é„‰", "å‘å—é„‰", "é¹¿é‡é„‰", "é—œå±±é®", "æµ·ç«¯é„‰", "æ± ä¸Šé„‰", "æ±æ²³é„‰", "æˆåŠŸé®", "é•·æ¿±é„‰", "å¤ªéº»é‡Œé„‰", "é‡‘å³°é„‰", "å¤§æ­¦é„‰", "é”ä»é„‰"],
        "æ¾æ¹–ç¸£": ["é¦¬å…¬å¸‚", "è¥¿å¶¼é„‰", "æœ›å®‰é„‰", "ä¸ƒç¾é„‰", "ç™½æ²™é„‰", "æ¹–è¥¿é„‰"],
        "é‡‘é–€ç¸£": ["é‡‘æ²™é®", "é‡‘æ¹–é®", "é‡‘å¯§é„‰", "é‡‘åŸé®", "çƒˆå¶¼é„‰", "çƒåµé„‰"],
        "é€£æ±Ÿç¸£": ["å—ç«¿é„‰", "åŒ—ç«¿é„‰", "è’å…‰é„‰", "æ±å¼•é„‰"]
    };

    let visitedPlaces = JSON.parse(localStorage.getItem('visitedPlaces')) || [];
    let currentResult = "";

    function enterZine() {
        document.getElementById('index-page').classList.add('hidden');
        setTimeout(() => { 
            document.getElementById('generator-page').style.opacity = '1'; 
            document.getElementById('generator-page').style.pointerEvents = 'auto'; 
            updateVisitedCount();
        }, 800);
    }

    function updateVisitedCount() {
        document.getElementById('visited-count').innerText = `History: ${visitedPlaces.length} places explored`;
    }

    function startRolling() {
        const resultBox = document.getElementById('result');
        const confirmBtn = document.getElementById('confirm-btn');
        const missionBox = document.getElementById('mission-box');
        
        confirmBtn.style.display = "none";
        missionBox.style.display = "none";
        
        let counter = 0;
        let roll = setInterval(() => {
            const counties = Object.keys(taiwanData);
            const rC = counties[Math.floor(Math.random() * counties.length)];
            const rT = taiwanData[rC][Math.floor(Math.random() * taiwanData[rC].length)];
            resultBox.innerText = `${rC} ${rT}`;
            counter++;
            if (counter > 20) {
                clearInterval(roll);
                pickFinal();
            }
        }, 50);
    }

    function pickFinal() {
        const counties = Object.keys(taiwanData);
        let available = [];
        
        // éæ¿¾æ‰å»éçš„åœ°æ–¹
        counties.forEach(c => {
            taiwanData[c].forEach(t => {
                const place = `${c} ${t}`;
                if (!visitedPlaces.includes(place)) {
                    available.push(place);
                }
            });
        });

        if (available.length === 0) {
            document.getElementById('result').innerText = "All regions explored.";
            return;
        }

        currentResult = available[Math.floor(Math.random() * available.length)];
        document.getElementById('result').innerText = currentResult;
        document.getElementById('confirm-btn').style.display = "block";
        
        const missions = ["å°‹æ‰¾ç•¶åœ°æœ€è€çš„ä¸€æ£µæ¨¹ä¸¦åˆå½±", "åœ¨ç•¶åœ°é›œè²¨åº—è²·ä¸€æ¨£æ²’è¦‹éçš„å°é›¶é£Ÿ", "æ‰¾ä¸€å€‹èƒ½çœ‹è¦‹åœ°å¹³ç·šçš„é«˜è™•ç™¼å‘†ååˆ†é˜", "ç‚ºå½¼æ­¤æ‹ä¸€å¼µå¸¶æœ‰ç•¶åœ°è·¯æ¨™çš„ç‰¹å¯«ç…§ç‰‡"];
        document.getElementById('mission-box').innerText = missions[Math.floor(Math.random() * missions.length)];
        document.getElementById('mission-box').style.display = "block";
    }

    function confirmArrival() {
        if (!visitedPlaces.includes(currentResult)) {
            visitedPlaces.push(currentResult);
            localStorage.setItem('visitedPlaces', JSON.stringify(visitedPlaces));
            updateVisitedCount();
            alert(`ğŸ“ ${currentResult} å·²åŠ å…¥è¶³è·¡æ¸…å–®`);
            document.getElementById('confirm-btn').style.display = "none";
        }
    }

    function clearHistory() {
        if (confirm("ç¢ºå®šè¦é‡ç½®æ‰€æœ‰å»éçš„è¶³è·¡ç´€éŒ„å—ï¼Ÿ")) {
            visitedPlaces = [];
            localStorage.removeItem('visitedPlaces');
            updateVisitedCount();
        }
    }
</script>
</body>
</html>
